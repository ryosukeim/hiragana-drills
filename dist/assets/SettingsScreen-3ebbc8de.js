import{s as g,i as r}from"./index-9f3fa20f.js";class b{constructor(t){this.router=t,this.settings={kanaSet:"hiragana",wordLevel:"beginner",hintMode:"normal",appLanguage:"en"}}async loadSettings(){this.settings.kanaSet=await g.getSetting("kanaSet","hiragana"),this.settings.wordLevel=await g.getSetting("wordLevel","beginner"),this.settings.hintMode=await g.getSetting("hintMode","normal"),this.settings.appLanguage=r.getLang()}async saveSettings(){await g.setSetting("kanaSet",this.settings.kanaSet),await g.setSetting("wordLevel",this.settings.wordLevel),await g.setSetting("hintMode",this.settings.hintMode),r.setLang(this.settings.appLanguage)}render(){const t=document.createElement("div");t.className="screen p-xl",t.style.maxWidth="600px",t.style.margin="0 auto";const o=document.createElement("div");o.className="flex items-center justify-between mb-xl",o.innerHTML=`
      <h1 data-i18n="settings_title">${r.t("settings_title")}</h1>
      <button class="btn btn-icon btn-secondary" id="back-btn">‚Üê</button>
    `;const n=document.createElement("div");n.className="flex-col gap-lg";const d=this.createToggleSection("settings_kanaSet",["settings_hiragana","settings_katakana"],["hiragana","katakana"],this.settings.kanaSet,e=>{this.settings.kanaSet=e,this.saveSettings()}),l=this.createToggleSection("settings_wordLevel",["settings_beginner","settings_intermediate","settings_advanced"],["beginner","intermediate","advanced"],this.settings.wordLevel,e=>{this.settings.wordLevel=e,this.saveSettings()}),a=this.createToggleSection("settings_hintMode",["settings_easy","settings_normal","settings_hard"],["easy","normal","hard"],this.settings.hintMode,e=>{this.settings.hintMode=e,this.saveSettings()}),i=this.createToggleSection("settings_appLanguage",["settings_english","settings_japanese"],["en","ja"],this.settings.appLanguage,e=>{this.settings.appLanguage=e,this.saveSettings(),setTimeout(()=>{const{SettingsScreen:c}=require("./SettingsScreen.js");this.router.navigateTo(new c(this.router))},100)});return n.appendChild(d),n.appendChild(l),n.appendChild(a),n.appendChild(i),t.appendChild(o),t.appendChild(n),t}createToggleSection(t,o,n,d,l){const a=document.createElement("div");a.className="card p-lg";const i=document.createElement("h3");i.className="mb-md text-lg",i.setAttribute("data-i18n",t),i.textContent=r.t(t);const e=document.createElement("div");return e.className="flex gap-sm",e.style.flexWrap="wrap",o.forEach((c,m)=>{const h=n[m],s=document.createElement("button");s.className=h===d?"btn btn-primary":"btn btn-secondary",s.setAttribute("data-i18n",c),s.textContent=r.t(c),s.style.flex="1",s.style.minWidth="120px",s.onclick=()=>{Array.from(e.children).forEach(p=>{p.className="btn btn-secondary"}),s.className="btn btn-primary",l(h)},e.appendChild(s)}),a.appendChild(i),a.appendChild(e),a}async onEnter(){await this.loadSettings();const t=document.getElementById("back-btn");t&&(t.onclick=()=>this.router.goBack())}}export{b as SettingsScreen};
